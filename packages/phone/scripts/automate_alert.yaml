description: Show a notification
fields:
  target:
    description: >
      A target to send the command to. This target will be used in
      the service name, like this: myphone -> notify.automate_myphone
    example: myphone
  title:
    description: The title of the notification
    example: Uh oh!
  message:
    description: The body of the notification
    example: A light went unavailable.
  dismiss:
    description: The text content of the dismiss button
    example: Okay
sequence:
  - service_template: >
      notify.automate_{{target | default(states('sensor.automate_phone_name'), true)}}
    data_template:
      message: >
        {
          "type": "notification",
          "title": "{{title | default('Home Assistant', true)}}",
          "message": "{{message | default('', true)}}",
          "dismiss": "{{dismiss | default('Okay', true)}}",
          "timeout": {{timeout | default('null', true)}},
          "feedbackKey": "{{feedback_key | default('null', true)}}",
          "webhookUrl": "{{states('sensor.automate_base_url')}}/api/webhook/{{states('sensor.automate_webhook_id')}}"
        }
